#!/usr/bin/env bash

# Check if screensaver ghostty is already running
if pgrep -f "ghostty.*--title=hearter-screensaver" > /dev/null 2>&1; then
    exit 0
fi

# Save current cursor timeout setting
CURRENT_TIMEOUT=$(hyprctl getoption cursor:inactive_timeout -j | jq -r '.float')
export CURRENT_TIMEOUT

# Set cursor to hide after 0.1 seconds of inactivity
hyprctl keyword cursor:inactive_timeout 0.1

# Launch ghostty in fullscreen with the ASCII animation
# Note: --class might not be supported, using --title instead
exec ghostty --config-default-files=false --background=000000 --font-size=24 --fullscreen --cursor-opacity=0 --title="hearter-screensaver" -e bash ~/.config/hypr/scripts/hearter-screensaver-inner

